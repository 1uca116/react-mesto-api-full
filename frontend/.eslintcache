[{"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/index.js":"1","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/reportWebVitals.js":"2","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/App.js":"3","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Footer.js":"4","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Main.js":"5","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/PopupWithForm.js":"6","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/ImagePopup.js":"7","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/AddPlacePopup.js":"8","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/EditAvatarPopup.js":"9","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Header.js":"10","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/EditProfilePopup.js":"11","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/InfoTooltip.js":"12","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Login.js":"13","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/ProtectedRoute.js":"14","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Register.js":"15","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/utils/auth.js":"16","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/utils/api.js":"17","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/contexts/CurrentUserContext.js":"18","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/ConfirmationPopup.js":"19","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Card.js":"20"},{"size":624,"mtime":1614846277162,"results":"21","hashOfConfig":"22"},{"size":362,"mtime":1612293176769,"results":"23","hashOfConfig":"22"},{"size":9740,"mtime":1614883465780,"results":"24","hashOfConfig":"22"},{"size":190,"mtime":1614150765996,"results":"25","hashOfConfig":"22"},{"size":1746,"mtime":1614505763570,"results":"26","hashOfConfig":"22"},{"size":757,"mtime":1614461083404,"results":"27","hashOfConfig":"22"},{"size":637,"mtime":1612627325411,"results":"28","hashOfConfig":"22"},{"size":1971,"mtime":1614505686974,"results":"29","hashOfConfig":"22"},{"size":1086,"mtime":1614461819538,"results":"30","hashOfConfig":"22"},{"size":1930,"mtime":1614888025950,"results":"31","hashOfConfig":"22"},{"size":2130,"mtime":1614842894404,"results":"32","hashOfConfig":"22"},{"size":564,"mtime":1614850369565,"results":"33","hashOfConfig":"22"},{"size":1527,"mtime":1614879366215,"results":"34","hashOfConfig":"22"},{"size":353,"mtime":1614880932635,"results":"35","hashOfConfig":"22"},{"size":1856,"mtime":1614879341258,"results":"36","hashOfConfig":"22"},{"size":1792,"mtime":1614884437553,"results":"37","hashOfConfig":"22"},{"size":3363,"mtime":1612626647034,"results":"38","hashOfConfig":"22"},{"size":84,"mtime":1614150725830,"results":"39","hashOfConfig":"22"},{"size":567,"mtime":1614507414097,"results":"40","hashOfConfig":"22"},{"size":1521,"mtime":1614842830119,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"6ydxfj",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"44"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/index.js",[],["84","85"],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/reportWebVitals.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/App.js",["86","87","88"],"import React from 'react';\nimport { Route, Switch, Redirect, useHistory} from 'react-router-dom';\nimport '../index.css';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport Api from '../utils/api.js';\nimport * as auth from '../utils/auth.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport ConfirmationPopup from \"./ConfirmationPopup\";\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Register from './Register.js';\nimport Login from './Login.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport successLogo from '../images/success__logo.svg'\nimport errorLogo from '../images/error__logo.svg'\n\n\nfunction App() {\n\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen]=React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen]=React.useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen]=React.useState(false);\n    const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n    const [selectedCard, setSelectedCard]=React.useState({});\n    const [isConfirmationPopupOpen, setIsConfirmationPopupOpen]=React.useState(false);\n    const [currentUser, setCurrentUser] = React.useState({\n        name: '',\n        about: '',\n        avatar: ''\n    });\n    const history = useHistory();\n    const [cards, setCards]=React.useState([]);\n    const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n    const [dataInfoTool, setDataInfoTool] = React.useState({\n        title: \"\",\n        icon: \"\"\n    });\n    const [loggedIn, setLoggedIn] = React.useState(false)\n    const [email, setEmail] = React.useState(\"\");\n\n\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true)\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true)\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true)\n    }\n\n    function handleInfoTooltipClick() {\n        setIsInfoTooltipOpen(true);\n    }\n\n    function closeAllPopups() {\n        setIsEditProfilePopupOpen(false)\n        setIsAddPlacePopupOpen(false)\n        setIsEditAvatarPopupOpen(false)\n        setIsImagePopupOpen(false)\n        setIsConfirmationPopupOpen(false)\n        setSelectedCard(null)\n        setIsInfoTooltipOpen(false)\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card)\n        setIsImagePopupOpen(true)\n    }\n    function handleCardDeleteClick(card){\n        setIsConfirmationPopupOpen(true)\n    }\n\n    function handleUpdateUser(name, about) {\n        Api.editUserInfo(name, about)\n            .then(data => {\n                setCurrentUser( {...data});\n                closeAllPopups();\n            })\n            .catch(e => console.log(e));\n    }\n\n    function handleUpdateAvatar(avatar) {\n        Api.updateAvatar(avatar)\n            .then(data => {\n                setCurrentUser({...data});\n                closeAllPopups();\n            })\n            .catch (e => console.log(e));\n    }\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        if (isLiked) {\n            Api.dislikeCard(card._id)\n                .then((newCard) => {\n                    const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n                    setCards(newCards)\n                        .catch(err => console.log(err));\n                });\n        } else {\n            Api.likeCard(card._id)\n                .then((newCard) => {\n                    const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n                    setCards(newCards)\n                }).catch(err => console.log(err));\n\n        }\n    }\n\n    function handleCardDelete(card) {\n        Api.deleteCard(card._id)\n            .then( _ => {\n                const newCards = cards.filter(c => c._id !== card._id);\n                setCards(newCards)\n            }).catch(err => console.log(err));\n    }\n\n    function handleAddPlace(name, link) {\n        Api.addCard(name, link)\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                closeAllPopups();\n            }).catch(err => console.log(err));\n    }\n\n    function handleRegister(email, password) {\n        auth.register(email, password)\n            .then((data) => {\n                console.log(data);\n                setDataInfoTool({ title: \"Вы успешно зарегистрировались!\", icon: successLogo });\n                handleInfoTooltipClick();\n            })\n            .catch((error) => {\n                console.error(error);\n                setDataInfoTool({ title: \"Что-то пошло не так! Попробуйте ещё раз.\", icon: errorLogo });\n                handleInfoTooltipClick();\n            })\n        history.push(\"/sign-in\");\n\n    }\n\n    function handleLogin(email, password) {\n        auth.authorize(email, password)\n            .then(token => {\n                auth.checkToken(token)\n                    .then(_ => {\n                        setLoggedIn(true);\n                        setEmail(email)\n                        history.push(\"/\");\n                    })\n                    .catch((error) => {\n                        console.error(error);\n                        setDataInfoTool({ title: \"Что-то пошло не так! Попробуйте ещё раз.\", icon: errorLogo });\n                        handleInfoTooltipClick();\n                    })\n            })\n            .catch((error) => {\n                console.error(error);\n                setDataInfoTool({ title: \"Что-то пошло не так! Попробуйте ещё раз.\", icon: errorLogo });\n                handleInfoTooltipClick();\n            })\n    }\n\n    function handleCheckToken() {\n        const token = localStorage.getItem(\"token\");\n        if (token) {\n            auth.checkToken(token)\n                .then((res) => {\n                    if (res) {\n                        setEmail(res.data.email);\n                        setLoggedIn(true);\n                        history.push(\"/\");\n                    } else {\n                        setDataInfoTool({ title: \"Что-то пошло не так! Попробуйте ещё раз.\", icon: errorLogo });\n                        handleInfoTooltipClick();\n                    }\n                })\n                .catch((error) => {\n                    console.log(error);\n                })\n        }\n    }\n\n    function signOut() {\n        setLoggedIn(false);\n        setEmail(\"\");\n        localStorage.removeItem(\"token\");\n        history.push(\"/sign-in\");\n    }\n\n    React.useEffect(() => {\n        handleCheckToken();\n    }, []);\n\n    React.useEffect(() => {\n        Api.getInitialCards().then(c => {\n            setCards(c)\n        }).catch(e => console.log(e));\n\n    }, [])\n\n\n    React.useEffect(() => {\n        Api.getUserInfo()\n            .then(data => {\n                setCurrentUser({ ...data });\n            })\n            .catch(e => console.log(e));\n    }, []);\n\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            <div className=\"page\">\n                <div className=\"page__container\">\n                    <Header\n                        email={email}\n                        signOut={signOut}\n                    />\n\n                    <Switch>\n                        <ProtectedRoute\n                            exact path=\"/\"\n                            component={Main}\n                            onEditProfile={handleEditProfileClick}\n                            onAddPlace={handleAddPlaceClick}\n                            onEditAvatar={handleEditAvatarClick}\n                            onCardClick={handleCardClick}\n                            onCardDeleteClick={handleCardDelete}\n                            cards={cards}\n                            onCardLike={handleCardLike}\n                            loggedIn={loggedIn}\n\n                        />\n\n                        <Route path=\"/sign-up\">\n                            <Register handleRegister={handleRegister} />\n                        </Route>\n\n                        <Route path=\"/sign-in\">\n                            <Login handleLogin={handleLogin} />\n                        </Route>\n\n                        <Route exact path=\"/\">\n                            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n                        </Route>\n                    </Switch>\n\n                    <Footer />\n\n                    <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n\n                    <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlace}/>\n\n                    <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n\n                    <ConfirmationPopup isOpen={isConfirmationPopupOpen} onClose={closeAllPopups}  onCardDeleteClick={handleCardDelete} />\n\n                    <InfoTooltip isOpen={isInfoTooltipOpen} onClose={closeAllPopups} title={dataInfoTool.title} icon={dataInfoTool.icon}/>\n\n\n                    { selectedCard\n                        ? <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={closeAllPopups} />\n                        : ''\n                    }\n\n                </div>\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;\n","/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Footer.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Main.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/PopupWithForm.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/ImagePopup.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/AddPlacePopup.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/EditAvatarPopup.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Header.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/EditProfilePopup.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/InfoTooltip.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Login.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/ProtectedRoute.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Register.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/utils/auth.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/utils/api.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/contexts/CurrentUserContext.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/ConfirmationPopup.js",[],"/Users/admin/Desktop/mesto-react-auth/react-mesto-auth/src/components/Card.js",[],{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","severity":1,"message":"94","line":7,"column":8,"nodeType":"95","messageId":"96","endLine":7,"endColumn":21},{"ruleId":"93","severity":1,"message":"97","line":79,"column":14,"nodeType":"95","messageId":"96","endLine":79,"endColumn":35},{"ruleId":"98","severity":1,"message":"99","line":203,"column":8,"nodeType":"100","endLine":203,"endColumn":10,"suggestions":"101"},"no-native-reassign",["102"],"no-negated-in-lhs",["103"],"no-unused-vars","'PopupWithForm' is defined but never used.","Identifier","unusedVar","'handleCardDeleteClick' is defined but never used.","react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'handleCheckToken'. Either include it or remove the dependency array.","ArrayExpression",["104"],"no-global-assign","no-unsafe-negation",{"desc":"105","fix":"106"},"Update the dependencies array to be: [handleCheckToken]",{"range":"107","text":"108"},[6798,6800],"[handleCheckToken]"]